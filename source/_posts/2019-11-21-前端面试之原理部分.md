---
title: 前端面试之原理部分
date: 2019-11-21 17:17:25
categories:
- 面试
tags:
- 前端
- 面试
- 学习
- 指南
description: javascript执行机制、内存管、Event Loop、不可变数据
---
# JavaScript的运行机制
本节你需要搞清楚以下问题：
- 作用域链本质上是如何产生的？
- this是如何绑定的？
- JavaScript代码运行原理是什么？
- 闭包产生的原因？


## JavaScript的执行环境
在了解JavaScript运行机制之前，我们需要搞清楚几个主要概念。  

### JavaScript引擎(JavaScript Engine)
目前市面上的JavaScript引擎：
- V8 — 开源，由 Google 开发，用 C ++ 编写
- Rhino — 由 Mozilla 基金会管理，开源，完全用 Java 开发
- SpiderMonkey — 是第一个支持 Netscape Navigator 的 JavaScript 引擎，目前正供 Firefox 使用
- JavaScriptCore — 开源，以Nitro形式销售，由苹果为Safari开发
- KJS — KDE 的引擎，最初由 Harri Porten 为 KDE 项目中的 Konqueror 网页浏览器开发
- Chakra (JScript9) — Internet Explorer
- Chakra (JavaScript) — Microsoft Edge
- Nashorn, 作为 OpenJDK 的一部分，由 Oracle Java 语言和工具组编写
- JerryScript —  物联网的轻量级引擎 

![](http://img.aisss.top/FlicrBTXJttLCZqFgFULolOx2ZwI)
V8引擎由两个主要部件组成:   
emory Heap(内存堆) — 内存分配地址的地方
Call Stack(调用堆栈) — 代码执行的地方

### JavaScript运行时（JavaScript Runtime）
想让JavaScript真正运作起来，单单靠JavaScript Engine是不够的，JavaScript Engine的工作是编译并执行 JavaScript 代码，完成内存分配、垃圾回收等,但是缺乏与外部交互的能力。

比如单靠一个V8引擎是无法进行ajax请求、设置定时器、响应事件等操作的，这就需要JavaScript运行时（JavaScript Runtime）的帮助，它为 JavaScript 提供一些对象或机制，使它能够与外界交互。

比如，虽然Chrome和node都是用了V8引擎，但是他们的运行时却不同，比如process、fs浏览器都无法提供。


### 可执行代码
一段js代码的运行可以分为2个阶段：
- 编辑阶段
    - 分词/词法分析（Token）
    - 解析/语法分析（Parsing）
    - 预编译（解释）
- 执行阶段  
    js并非简单的一行行解释执行，而是将js代码分为一块块的可执行代码块进行执行，那么如何划分代码块？

目前有三大类代码块：
- 函数代码块（Function code）
- 全局代码块（Global code）
- eval代码块（Eval code）

